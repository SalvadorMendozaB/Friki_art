<!DOCTYPE html>
<html lang="en">
<head>
    <%-include('../partials/head')%>
    <title>Añadir producto</title>
    <link rel="stylesheet" href="/stylesheets/estilos.css">
    <link rel="stylesheet" href="/stylesheets/normalize.css">
    <link rel="stylesheet" href="/stylesheets/estiloLogin.css">
</head>
<body>
    <% if (locals.usuario) {%>
        <%-include('../partials/header', {usuario: usuario})%>
        <% } else {%>
        <%-include('../partials/header')%>
        <%}%>
    <% console.log(locals.oldData) %>
    <h2 class="titulo">Añadir un nuevo producto</h2>
    <form method="POST" action="/productos" enctype="multipart/form-data">
        <article>
        <strong>Nombre del producto:</strong>
        <div id="contenedorNombre"><input type="text" name="nombre" 
              class= "campo <%= locals.errors && errors.nombre ? 'campoError' : ''%>"
              value= "<%= locals.oldData && oldData.nombre ? oldData.nombre : '' %>"> 
              <div class="errorText divError">
            <% if(locals.errors && errors.nombre) {  %>
               <%= errors.nombre.msg %>
            <% } %>
        </div>
        </div>
       
        <br>
        <strong>Categoria:</strong>
        <div id="contenedorCategoria">
            <select name="categoria" class="campo <%= locals.errors && errors.categoria  ? 'campoError' : ''%>">
                <option value="" <%= locals.oldData && oldData.categoria != '' ? '' : 'selected'%>>--Seleccione una categoria--</option>
                <% categorias.forEach ( (categoria) => {%>
                <option value="<%= categoria.category_id%>" <%= locals.oldData && categoria.category_id == oldData.categoria ? 'selected' : '' %>> <%= categoria.name%> </option>
                <% }) %>
            </select>
            <div class="errorText divError">
            <% if(locals.errors && errors.categoria) {  %>
                <%= errors.categoria.msg %>
            <% } %>
        </div>
        </div>
        <br>
        <strong>Colores: </strong>
        <div id="contenedorColores"><input type="text" name="colores" 
              class="campo <%= locals.errors && errors.colores ? 'campoError' : ''%>"
              value= "<%= locals.oldData && oldData.colores ? oldData.colores : '' %>"
              >
              <div class="errorText divError">
            <% if(locals.errors && errors.colores) {  %>
                <%= errors.colores.msg %>
            <% } %>
        </div>
        </div>
        <br>
        <strong>Descripcion: </strong>
        <div id="contenedorDescripcion"><textarea name="descripcion" class ="<%= locals.errors && errors.descripcion ? 'campoError' : ''%>" cols="30" rows="10" value= "<%= locals.oldData && oldData.descripcion ? oldData.descripcion : '' %>"></textarea> 
            <div class="errorText divError">
            <% if(locals.errors && errors.descripcion) {  %>
                <%= errors.descripcion.msg %>
                <% } %> 
            </div>
        </div>
        <strong>Marca: </strong>
        <div id="contenedorMarca">
        <select name="marca" class="campo <%= locals.errors && errors.marca  ? 'campoError' : ''%>">
            <option value="" <%= locals.oldData && oldData.marca != '' ? '' : 'selected'%>>--Seleccione una marca--</option>
            <% locals.marcas.forEach ( (marca) => {%>
            <option value="<%= marca.brand_id%>" <%= locals.oldData && marca.brand_id == oldData.marca ? 'selected' : '' %>> <%= marca.name%> </option>
            <% }) %>
        </select>
        <div class="errorText divError">
            <% if(locals.errors && errors.marca) {  %>
                <%= errors.marca.msg %>
                <% } %> 
            </div>
    </div>
        <br>
        <strong>Precio:</strong>
        <div id="contenedorPrecio"><input type="number" name="precio" 
              class ="campo <%= locals.errors && errors.precio ? 'campoError' : ''%>"
              value= "<%= locals.oldData && oldData.precio ? oldData.precio : '' %>"
              > 
              <div class="errorText divError">
            <% if(locals.errors && errors.precio) {  %>
                <%= errors.precio.msg %>
            <% } %>
              </div>
        </div>
        <br>
        <strong>Imagen:</strong>
        <div id="contenedorImagen"><input type="file" name="imagen" class ="campo <%= locals.errors && errors.imagen ? 'campoError' : ''%>"> 
            <div class="errorText divError">
            <% if(locals.errors && errors.imagen) {  %>
                <%= errors.imagen.msg %>
                <% } %>
            </div>
        </div><br>
        <button class="boton"><strong>Guardar</strong> </button>
    </article>
    </form>

    <%-include('../partials/footer')%>
    
</body>
<script src="/javascripts/Validaciones productos/ValidacionesCrear.js"></script>
</html>